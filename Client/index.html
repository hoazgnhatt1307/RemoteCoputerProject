<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RCS - Remote Control System</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Consolas&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="login-overlay">
      <div class="login-card">
        <h2 class="mb-4 fw-bold text-primary">
          <i class="fas fa-shield-alt"></i> RCS Login
        </h2>
        <div class="mb-3 text-start">
          <label class="form-label small fw-bold">Server IP</label>
          <input
            type="text"
            id="server-ip"
            class="form-control mb-2"
            placeholder="Ex: 192.168.1.5"
            value="localhost"
          />
          <div class="row">
            <div class="col-6">
              <label class="form-label small fw-bold">Port</label>
              <input
                type="number"
                id="server-port"
                class="form-control mb-2"
                value="8181"
              />
            </div>
            <div class="col-6">
              <label class="form-label small fw-bold">Password</label>
              <input
                type="password"
                id="auth-pass"
                class="form-control mb-2"
                value="123"
              />
            </div>
          </div>
        </div>
        <button
          onclick="initiateConnection()"
          class="btn btn-primary w-100 fw-bold py-2"
        >
          CONNECT SYSTEM
        </button>
        <p id="login-error" class="mt-3 text-danger fw-bold small"></p>
      </div>
    </div>

    <div class="d-flex disabled-ui" id="main-interface">
      <div id="sidebar-wrapper">
        <div class="sidebar-heading">
          <i class="fas fa-network-wired"></i> SYSTEM CORE
        </div>
        <div class="list-group list-group-flush mt-3">
          <a
            href="#"
            class="list-group-item active"
            onclick="switchTab('dashboard', this)"
          >
            <i class="fas fa-chart-line"></i> Dashboard
          </a>
          <a
            href="#"
            class="list-group-item"
            onclick="switchTab('monitor', this)"
          >
            <i class="fas fa-desktop"></i> Screen Monitor
          </a>
          <a
            href="#"
            class="list-group-item"
            onclick="switchTab('processes', this)"
          >
            <i class="fas fa-tasks"></i> Process & Apps
          </a>
          <a
            href="#"
            class="list-group-item"
            onclick="switchTab('terminal', this)"
          >
            <i class="fas fa-terminal"></i> Terminal Logs
          </a>
          <a
            href="#"
            class="list-group-item text-danger mt-auto mb-4"
            onclick="disconnect()"
          >
            <i class="fas fa-sign-out-alt"></i> Disconnect
          </a>
        </div>
      </div>

      <div id="page-content-wrapper">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h3 class="fw-bold text-dark m-0" id="pageTitle">Overview</h3>
          <span id="connectionBadge" class="status-badge status-offline">
            <i class="fas fa-circle"></i> Disconnected
          </span>
        </div>

        <div id="tab-dashboard" class="tab-content active">
          <div class="row">
            <div class="col-md-6">
              <div class="card-custom">
                <div class="card-header-custom">
                  <i class="fas fa-power-off text-danger"></i> Power Control
                </div>
                <div class="d-grid gap-2">
                  <button
                    onclick="if(confirm('Tắt máy server?')) sendCommand('SHUTDOWN')"
                    class="btn btn-danger"
                  >
                    <i class="fas fa-power-off"></i> SHUTDOWN SERVER
                  </button>
                  <button
                    onclick="if(confirm('Khởi động lại server?')) sendCommand('RESTART')"
                    class="btn btn-warning text-dark"
                  >
                    <i class="fas fa-sync"></i> RESTART SERVER
                  </button>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card-custom">
                <div class="card-header-custom">
                  <i class="fas fa-rocket text-primary"></i> Quick Launch
                </div>
                <div class="input-group">
                  <input
                    type="text"
                    id="quickAppInput"
                    class="form-control"
                    placeholder="App name (e.g. notepad)"
                  />
                  <button onclick="startApp()" class="btn btn-primary">
                    <i class="fas fa-play"></i> Run
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="tab-monitor" class="tab-content">
          <div class="card-custom">
            <div class="card-header-custom">
              <span><i class="fas fa-eye text-primary"></i> Live Screen</span>
              <div>
                <button
                  onclick="sendCommand('START_STREAM')"
                  class="btn btn-success btn-sm"
                >
                  <i class="fas fa-video"></i> Start Stream
                </button>
                <button
                  onclick="sendCommand('STOP_STREAM')"
                  class="btn btn-secondary btn-sm"
                >
                  <i class="fas fa-stop"></i> Stop
                </button>
                <button
                  onclick="sendCommand('CAPTURE_SCREEN')"
                  class="btn btn-info btn-sm text-white"
                >
                  <i class="fas fa-camera"></i> Capture HD
                </button>
              </div>
            </div>
            <div class="monitor-frame">
              <div id="screen-placeholder" class="text-secondary text-center">
                <i class="fas fa-video-slash fa-3x mb-3"></i><br />Stream is
                offline
              </div>
              <img id="live-screen" src="" alt="Live Stream" />
              <div class="monitor-overlay" id="monitorStatus">Waiting...</div>
            </div>
          </div>
        </div>

        <div id="tab-processes" class="tab-content">
          <div class="card-custom">
            <div class="card-header-custom">
              <span
                ><i class="fas fa-list-alt text-primary"></i> Task Manager</span
              >
              <div>
                <button
                  onclick="getApps()"
                  class="btn btn-outline-primary btn-sm"
                >
                  Apps Only
                </button>
                <button
                  onclick="getProcesses()"
                  class="btn btn-outline-secondary btn-sm"
                >
                  All Processes
                </button>
              </div>
            </div>
            <div style="max-height: 500px; overflow-y: auto">
              <table class="table table-hover table-custom" id="procTable">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Name / Title</th>
                    <th>Memory</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td colspan="4" class="text-center">
                      No data. Click refresh buttons above.
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div id="tab-terminal" class="tab-content">
          <div class="card-custom">
            <div class="card-header-custom">
              <span
                ><i class="fas fa-keyboard text-primary"></i> Keylogger
                Stream</span
              >
              <button
                onclick="document.getElementById('terminal-output').innerText = ''"
                class="btn btn-dark btn-sm"
              >
                Clear
              </button>
            </div>
            <div id="terminal-output" class="terminal-window">
              > System initialized... > Waiting for connection...
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
    <div id="toast-container" class="toast-container"></div>
  </body>
</html>
